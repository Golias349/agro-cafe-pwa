<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GrÃ£o Digital</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
  <header>
    <h1>ğŸŒ¾ GrÃ£o Digital</h1>
    <p id="data"></p>
  </header>

  <main>
    <!-- Aba TalhÃµes -->
    <section id="abaTalhoes" class="aba ativa">
      <div class="card">
        <h2>ğŸŒ± TalhÃµes</h2>
        <form id="formTalhao">
          <input type="text" id="nomeTalhao" placeholder="Novo TalhÃ£o" required>
          <button type="submit">Adicionar TalhÃ£o</button>
        </form>
        <br>
        <input type="text" id="pesquisaTalhao" placeholder="ğŸ” Pesquisar talhÃ£o...">
      </div>
      <section id="listaTalhoes"></section>
    </section>

    <!-- Aba Registros -->
    <section id="abaRegistros" class="aba">
      <div class="card">
        <h2>ğŸ“ Registro de AdubaÃ§Ã£o</h2>
        <form id="formAplicacao">
          <label for="selectTalhao">Selecionar TalhÃ£o:</label>
          <select id="selectTalhao" required></select>

          <label>Tipo de Insumo:</label>
          <select id="tipoInsumo" required>
            <option value="NPK">NPK</option>
            <option value="Ureia">Ureia</option>
            <option value="CalcÃ¡rio">CalcÃ¡rio</option>
            <option value="Gesso">Gesso</option>
            <option value="Outro">Outro</option>
          </select>

          <label>DescriÃ§Ã£o:<br><input type="text" id="descAplicacao" placeholder="Ex: AdubaÃ§Ã£o de cobertura" required></label><br>
          <label>Quantidade (g):<br><input type="number" id="qtdAplicacao" placeholder="Ex: 500" required></label><br>
          <button type="submit">Salvar AplicaÃ§Ã£o</button>
        </form>
      </div>
    </section>

    <!-- Aba RelatÃ³rios -->
    <section id="abaRelatorios" class="aba">
      <div class="card">
        <h2>ğŸ“Š RelatÃ³rio Geral</h2>

        <div class="filtros-relatorio">
          <label>Filtrar por tipo de insumo:</label>
          <select id="filtroTipo">
            <option value="Todos">Todos</option>
            <option value="NPK">NPK</option>
            <option value="Ureia">Ureia</option>
            <option value="CalcÃ¡rio">CalcÃ¡rio</option>
            <option value="Gesso">Gesso</option>
            <option value="Outro">Outro</option>
          </select>
        </div>

        <p><strong>Total de TalhÃµes:</strong> <span id="relTotalTalhoes">0</span></p>
        <p><strong>Total de AplicaÃ§Ãµes:</strong> <span id="relTotalAplicacoes">0</span></p>
        <p><strong>Total de Insumos Aplicados:</strong> <span id="relTotalInsumos">0g</span></p>

        <h3>Resumo por TalhÃ£o</h3>
        <ul id="resumoTalhoes"></ul>

        <h3>GrÃ¡fico por TalhÃ£o</h3>
        <canvas id="graficoInsumos" width="400" height="200"></canvas>
        <br>
        <button id="toggleGrafico">ğŸ”„ Alternar Barras/Pizza</button>
        <button id="exportarPDF">ğŸ“„ Exportar PDF</button>
        <button id="exportarXLSX">ğŸ§¾ Exportar Excel</button>

        <h3>GrÃ¡fico por Tipo de Insumo</h3>
        <canvas id="graficoTipos" width="400" height="200"></canvas>
      </div>
    </section>

    <!-- Aba ConfiguraÃ§Ãµes -->
    <section id="abaConfig" class="aba">
      <div class="card">
        <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
        <p><strong>Tema:</strong> segue automaticamente o tema do sistema (claro/escuro).</p>
      </div>
      <div class="card">
        <h2>ğŸ’¾ Backup & RestauraÃ§Ã£o</h2>
        <button id="exportarJSON">â¬‡ï¸ Exportar Dados (JSON)</button>
        <br><br>
        <label class="import-label">â¬†ï¸ Importar Dados (JSON)
          <input type="file" id="importarJSON" accept="application/json">
        </label>
        <p class="nota">Ao importar, os dados atuais serÃ£o substituÃ­dos.</p>
      </div>
    </section>
  </main>

  <!-- Menu inferior -->
  <nav class="menu-inferior">
    <button onclick="mostrarAba('abaTalhoes')">ğŸŒ± TalhÃµes</button>
    <button onclick="mostrarAba('abaRegistros')">ğŸ“ Registros</button>
    <button onclick="mostrarAba('abaRelatorios')">ğŸ“Š RelatÃ³rios</button>
    <button onclick="mostrarAba('abaConfig')">âš™ï¸ ConfiguraÃ§Ãµes</button>
  </nav>

  <script src="app.js"></script>
</body>
</html>
