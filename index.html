<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GrÃ£o Digital</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#6d4c41" />
</head>
<body>
  <header>
    <h1>ğŸŒ¾ GrÃ£o Digital</h1>
    <p id="data"></p>
  </header>

  <main>
    <!-- TALHÃ•ES -->
    <section id="abaTalhoes" class="aba ativa">
      <div class="card">
        <h2>ğŸŒ± TalhÃµes</h2>
        <form id="formTalhao" class="grid-2">
          <input type="text" id="nomeTalhao" placeholder="Nome do TalhÃ£o" required />
          <input type="number" step="0.01" id="areaTalhao" placeholder="Ãrea (ha)" required />
          <input type="number" step="0.01" id="metaTalhao" placeholder="Meta (kg/ha) â€” opcional" />
          <button type="submit">Adicionar TalhÃ£o</button>
        </form>
        <input type="text" id="pesquisaTalhao" placeholder="ğŸ” Pesquisar talhÃ£o..." />
      </div>
      <section id="listaTalhoes"></section>
    </section>

    <!-- REGISTROS -->
    <section id="abaRegistros" class="aba">
      <div class="card">
        <h2>ğŸ“ Registro de AdubaÃ§Ã£o</h2>
        <form id="formAplicacao">
          <label>TalhÃ£o</label>
          <select id="selectTalhao" required></select>

          <label>Tipo de Adubo (do Estoque)</label>
          <select id="tipoInsumo" required></select>

          <label>DescriÃ§Ã£o</label>
          <input type="text" id="descAplicacao" placeholder="Ex.: AdubaÃ§Ã£o de cobertura" required />

          <label>Quantidade aplicada (kg)</label>
          <input type="number" id="kgAplicacao" placeholder="Ex.: 200" required />

          <button type="submit">Salvar AplicaÃ§Ã£o</button>
          <p class="nota">O custo Ã© calculado automaticamente (kg Ã· kg/saco Ã— R$/saco) e o estoque Ã© atualizado.</p>
        </form>
      </div>
    </section>

    <!-- RELATÃ“RIOS -->
    <section id="abaRelatorios" class="aba">
      <div class="card">
        <h2>ğŸ“Š Totais</h2>
        <div class="resumo">
          <p><strong>Total de TalhÃµes:</strong> <span id="relTotalTalhoes">0</span></p>
          <p><strong>Total de AplicaÃ§Ãµes:</strong> <span id="relTotalAplicacoes">0</span></p>
          <p><strong>Total Aplicado (kg):</strong> <span id="relTotalKg">0</span></p>
          <p><strong>Total Gasto (R$):</strong> <span id="relTotalCusto">0,00</span></p>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ“‹ Resumo por TalhÃ£o</h3>
        <ul id="resumoTalhoes" class="lista-relatorio"></ul>
      </div>

      <div class="grid-2-wrap">
        <div class="card">
          <h3>ğŸ“ˆ kg por TalhÃ£o</h3>
          <canvas id="grafKgTalhao"></canvas>
        </div>
        <div class="card">
          <h3>ğŸ¥¼ kg por Tipo de Adubo</h3>
          <canvas id="grafKgTipo"></canvas>
        </div>
      </div>

      <div class="grid-2-wrap">
        <div class="card">
          <h3>ğŸ’° Gastos por MÃªs (R$)</h3>
          <canvas id="grafCustoMes"></canvas>
        </div>
        <div class="card">
          <h3>ğŸ’° Gastos por Tipo de Adubo (R$)</h3>
          <canvas id="grafCustoTipo"></canvas>
        </div>
      </div>

      <div class="card">
        <h3>ğŸ’µ R$/ha por TalhÃ£o</h3>
        <canvas id="grafCustoHaTalhao"></canvas>
      </div>

      <div class="card acoes-relatorio">
        <button id="exportarPDF">ğŸ“„ Exportar PDF</button>
        <button id="compartilharPDF">ğŸ“¤ Compartilhar PDF</button>
        <button id="exportarXLSX">ğŸ§¾ Exportar Excel</button>
      </div>
    </section>

    <!-- ESTOQUE -->
    <section id="abaEstoque" class="aba">
      <div class="card">
        <h2>ğŸ“¦ Estoque de Adubo</h2>
        <form id="formEstoque" class="grid-2">
          <input type="text" id="estNome" placeholder="Nome do adubo (ex.: Ureia, NPK 20-05-20)" required />
          <input type="number" id="estSacos" placeholder="Quantidade de sacos" required />
          <input type="number" id="estKgSaco" placeholder="Peso por saco (kg)" required />
          <input type="number" id="estPrecoSaco" placeholder="PreÃ§o por saco (R$)" step="0.01" required />
          <button type="submit">Adicionar ao Estoque</button>
        </form>
      </div>
      <section id="listaEstoque"></section>
    </section>

    <!-- CONFIG -->
    <section id="abaConfig" class="aba">
      <div class="card">
        <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
        <button id="btnPermissaoNotif">Permitir notificaÃ§Ãµes</button>
        <div class="grid-2">
          <label>FrequÃªncia
            <select id="notifFreq">
              <option value="none">Sem lembrete</option>
              <option value="daily">DiÃ¡rio</option>
              <option value="weekly">Semanal</option>
            </select>
          </label>
          <label>Hora
            <input type="time" id="notifHora" value="08:00" />
          </label>
        </div>
        <label id="diaSemanaWrap" style="display:none;">Dia da semana
          <select id="notifDia">
            <option value="1">Segunda</option>
            <option value="2">TerÃ§a</option>
            <option value="3">Quarta</option>
            <option value="4">Quinta</option>
            <option value="5">Sexta</option>
            <option value="6">SÃ¡bado</option>
            <option value="0">Domingo</option>
          </select>
        </label>
        <button id="salvarNotif">ğŸ’¾ Salvar lembrete</button>
        <p class="nota">ObservaÃ§Ã£o: alguns celulares podem nÃ£o disparar no minuto exato se o app estiver fechado; ao reabrir, o lembrete Ã© verificado.</p>
      </div>

      <div class="card">
        <h2>ğŸ’¾ Backup & RestauraÃ§Ã£o</h2>
        <button id="exportarJSON">â¬‡ï¸ Exportar Dados (JSON)</button>
        <br /><br />
        <label class="import-label">â¬†ï¸ Importar Dados (JSON)
          <input type="file" id="importarJSON" accept="application/json" />
        </label>
      </div>
    </section>
  </main>

  <!-- Menu inferior -->
  <nav class="menu-inferior">
    <button onclick="mostrarAba('abaTalhoes')">ğŸŒ± TalhÃµes</button>
    <button onclick="mostrarAba('abaRegistros')">ğŸ“ Registros</button>
    <button onclick="mostrarAba('abaRelatorios')">ğŸ“Š RelatÃ³rios</button>
    <button onclick="mostrarAba('abaEstoque')">ğŸ“¦ Estoque</button>
    <button onclick="mostrarAba('abaConfig')">âš™ï¸ Config</button>
  </nav>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!-- app -->
  <script src="app.js"></script>
</body>
</html>
